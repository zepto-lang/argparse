(load "argparse.zp")

(define x (argparse:handle-args "test" 
              (list (make-hash ["name" "foo"] 
                               ["type" :number]
                               ["default" 10]
                               ["usage" "foo you"])

                    (make-hash ["name" "bar"]
                               ["type" :string]
                               ["usage" "bar me"])
                    (make-hash ["name" "bool"]
                               ["short" "b"]
                               ["type" :boolean]
                               ["usage" "some boolean"]))))
(if (hash-map? x)
  (begin
    (write `("foo is: " ,(x "foo")))
    (write `("bar is: " ,(x "bar")))
    (write `("bool is: " ,(x "bool")))))
